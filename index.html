<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>GOLD Boolean</title>
    <link rel="icon" href="/gold-bullion-favicon.png" type="image/png" />
            <link rel="stylesheet" href="styles.css?v=48">
                <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore-compat.js"></script>
    <script src="script.js?v=15"></script>
</head>
<body>
    <!-- Authentication Gateway Screen -->
    <div id="authGateway" class="auth-gateway">
        <div class="auth-gateway-content">
            <div class="auth-logo">
                <h1 class="bullion-title">
                    <span class="gold-text">GOLD</span> <span class="bullion-text"><i>Boolean</i></span>
                </h1>
                <p class="auth-subtitle">Boolean Search Management Platform</p>
            </div>
            
            <div class="auth-options">
                <h2>Choose Your Sign-In Method</h2>
                
                <!-- Google Authentication -->
                <div class="auth-option">
                    <button onclick="signInWithGoogle()" class="auth-option-btn google-auth-btn">
                        <span class="auth-icon">üîç</span>
                        <span class="auth-text">Sign in with Google</span>
                    </button>
                </div>
                
                <!-- Guest Authentication -->
                <div class="auth-option">
                    <button onclick="signInAsGuest()" class="auth-option-btn guest-auth-btn">
                        <span class="auth-icon">üë§</span>
                        <span class="auth-text">Continue as Guest</span>
                    </button>
                </div>
            </div>
            
            <div class="auth-footer">
                <p>Your data will be saved locally and can be exported at any time.</p>
            </div>
        </div>
    </div>

    <div class="container" id="appContainer" style="display: none;">
        <header>
          <div class="header-flex-inline">
            <div class="header-main-inline">
              <h1 class="bullion-title">
                <span class="gold-text">GOLD</span> <span class="bullion-text"><i>Boolean</i></span>
              </h1>
              <nav>
                <button class="nav-btn active" data-section="storage">Storage</button>
                <button class="nav-btn bullion-btn" data-section="builder">Builder</button>
                <button class="nav-btn" data-section="trainer">Trainer</button>
              </nav>
            </div>
            <div class="data-management-inline-group">
              <div class="data-actions-row-inline">
                <button onclick="exportData()" class="backup-btn" title="Download a backup of all your data to your computer.">üíæ</button>
                <button onclick="importData()" class="backup-btn" title="Import a backup file to restore your data.">üìÅ</button>
                <button onclick="clearAllData()" class="backup-btn danger" title="Clear all data from the app. This cannot be undone!">üóëÔ∏è</button>

                <span id="dataStatus" class="data-status" title="Shows the current save status. Always 'Saved' if your data is up to date.">‚úì</span>
              </div>
              
              <!-- Auth Section -->
              <div class="auth-section">
                <div id="userInfo" class="user-info">
                  <span id="userEmail" class="user-email"></span>
                  <button onclick="logout()" class="auth-btn logout-btn">Logout</button>
                </div>
              </div>
            </div>
          </div>
        </header>

        <main>
            <!-- Storage Section -->
            <section id="storage" class="section active">
                <h2>Storage</h2>
                <div class="storage-container">
                    <div class="categories-panel">
                        <h3>Directory</h3>
                        <div id="categoryList" class="category-list">
                            <!-- Categories will be populated here -->
                        </div>
                    </div>
                    
                    <div class="keywords-panel">
                        <div id="categoryView">
                            <h3 id="currentCategoryTitle">Select a Category</h3>
                            <div id="categoryContent">
                                <p style="color: #7f8c8d; font-style: italic;">Click on a category to view and manage its items.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Role Dashboard Section -->
            <section id="builder" class="section">
                <div id="roleDashboard" class="role-dashboard">
                    <div class="dashboard-header">
                        <h2>Role Management Dashboard</h2>
                        <div class="dashboard-actions">
                            <button id="filterRolesBtn" class="filter-btn">üîç Filter Roles</button>
                            <button id="addNewRoleBtn" class="add-role-btn">‚ûï Add New Role</button>
                            <button id="demoModeBtn" class="demo-btn">üéØ Demo Mode</button>
                        </div>
                    </div>
                    
                    <div class="search-section">
                        <input type="text" id="roleSearch" placeholder="Search roles..." class="role-search-input">
                    </div>
                    
                    <div id="rolesContainer" class="roles-container">
                        <!-- Roles will be populated here -->
                    </div>
                </div>
                
                <div id="booleanBuilder" class="boolean-builder" style="display: none;">
                    <div class="builder-header">
                        <button id="backToDashboardBtn" class="back-btn">‚Üê Back to Dashboard</button>
                        <div class="builder-title-container">
                            <h3 id="currentRoleTitle">Boolean Keyword Builder</h3>
                        </div>
                    </div>
                    
                    <div class="builder-container">
                        <!-- Left Column -->
                        <div class="builder-left-column">
                            <!-- Boolean String Display -->
                            <div class="boolean-search-string-section">
                                <h3>Your Boolean Search String</h3>
                                <textarea id="booleanString" class="boolean-string-textarea" placeholder="Click buttons and keywords below to build your search string..."></textarea>
                                <div class="boolean-string-actions">
                                    <button id="copyBooleanString" class="copy-btn">üìã Copy String</button>
                                    <button id="clearBooleanString" class="clear-btn">üóëÔ∏è Clear</button>
                                </div>
                            </div>

                            <!-- Boolean Operators -->
                            <div class="boolean-operators-section">
                                <div class="operators-header">
                                    <h3>Boolean Operators</h3>
                                    <div class="interaction-mode-toggle">
                                        <button id="clickModeBtn" class="mode-btn active" data-mode="click">
                                            <span class="mode-icon">üëÜ</span> Click Mode
                                        </button>
                                        <button id="dragModeBtn" class="mode-btn" data-mode="drag">
                                            <span class="mode-icon">üñ±Ô∏è</span> Drag Mode
                                        </button>
                                    </div>
                                </div>
                                <div class="boolean-operators-grid">
                                    <button class="boolean-operator-btn" data-value="(">(</button>
                                    <button class="boolean-operator-btn" data-value=")">)</button>
                                    <button class="boolean-operator-btn" data-value='"'">"</button>
                                    <button class="boolean-operator-btn" data-value=" AND ">AND</button>
                                    <button class="boolean-operator-btn" data-value=" OR ">OR</button>
                                    <button class="boolean-operator-btn" data-value=" NOT ">NOT</button>
                                    <button class="boolean-operator-btn" data-value=" ">SPACE</button>
                                </div>
                                <div class="auto-toggle-section">
                                    <button id="autoAndBtn" class="auto-toggle-btn" data-operator="AND">
                                        <span class="toggle-icon">‚ö°</span>
                                        <span class="toggle-text">Auto AND</span>
                                    </button>
                                    <button id="autoOrBtn" class="auto-toggle-btn" data-operator="OR">
                                        <span class="toggle-icon">‚ö°</span>
                                        <span class="toggle-text">Auto OR</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Recently Used -->
                            <div class="recently-used-section">
                                <h3>Recently Used</h3>
                                <div id="recentlyUsedContainer" class="recently-used-container">
                                    <!-- Recently used searches will be populated here -->
                                </div>
                            </div>
                        </div>

                        <!-- Right Column -->
                        <div class="builder-right-column">
                            <!-- Temporary Keyword Pool Section -->
                            <div class="temp-keyword-pool-section">
                                <h3>Temporary Keyword Pool</h3>
                                <div class="temp-keyword-input-container">
                                    <input type="text" id="tempKeywordInput" class="temp-keyword-input" placeholder="Add temporary keywords...">
                                    <button id="addTempKeywordBtn" class="add-temp-keyword-btn">Add</button>
                                </div>
                                <div class="temp-keywords-container">
                                    <div class="temp-keywords-list" id="tempKeywordsList">
                                        <!-- Temporary keywords will be rendered here -->
                                    </div>
                                    <div class="temp-keywords-actions">
                                        <button id="clearTempKeywordsBtn" class="clear-temp-keywords-btn">Clear All</button>
                                        <button id="addTempToBooleanBtn" class="add-temp-to-boolean-btn">Add All to Search</button>
                                    </div>
                                </div>
                            </div>

                            <div class="selected-keywords-section">
                                <div id="selectedKeywordsContainer" class="selected-keywords-container">
                                    <!-- Selected keywords will be displayed here -->
                                </div>
                            </div>

                            <!-- Saved Searches -->
                            <div class="saved-searches-section">
                                <h3>Saved Searches</h3>
                                <div class="saved-searches-filter">
                                    <input type="text" id="savedSearchesFilter" class="saved-searches-filter-input" placeholder="Filter saved searches...">
                                </div>
                                <div id="savedSearchesContainer" class="saved-searches-container">
                                    <!-- Saved searches will be populated here -->
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </section>

            <!-- Trainer Section -->
            <section id="trainer" class="section">
                <h2>Trainer</h2>
                <div class="trainer-container">
                    <div class="training-panel">
                        <h3>Training Content</h3>
                        <div class="training-controls">
                            <input type="text" id="trainingTitle" placeholder="Training title">
                            <textarea id="trainingContent" placeholder="Enter training content here..."></textarea>
                            <button id="saveTraining">Save Training</button>
                        </div>
                        <div id="trainingList" class="training-list">
                            <!-- Training content will be listed here -->
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Add Title Modal -->
    <div id="addTitleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Title</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="titleName">Boolean Title:</label>
                    <input type="text" id="titleName" placeholder="Enter boolean title">
                </div>

            </div>
            <div class="modal-footer">
                <button onclick="saveTitle()" class="save-btn">Save Title</button>
                <button onclick="closeModal()" class="cancel-btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Title Details Modal -->
    <div id="titleDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="titleDetailsHeader">Title Details</h3>
                <span class="close" onclick="closeTitleDetailsModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="title-info">
                    <h4 id="selectedTitleName"></h4>
                </div>
                <div class="boolean-options-section">
                    <h4>Boolean Options:</h4>
                    <div id="existingBooleanOptions">
                        <!-- Existing boolean options will be displayed here -->
                    </div>
                    <div class="add-new-option">
                        <input type="text" id="newBooleanOption" placeholder="Add new boolean option and press Enter">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeTitleDetailsModal()" class="cancel-btn">Close</button>
            </div>
        </div>
    </div>

    <!-- New Role Modal -->
    <div id="newRoleModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Role</h3>
                <span class="close" onclick="closeNewRoleModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newRoleTitle">Role Title:</label>
                    <input type="text" id="newRoleTitle" placeholder="e.g., Senior Software Engineer" class="form-input">
                </div>
                <div class="form-group">
                    <label for="newRoleId">Role ID:</label>
                    <input type="text" id="newRoleId" placeholder="e.g., 96436" class="form-input">
                </div>
                <div class="form-group">
                    <label for="newRoleClient">Client:</label>
                    <select id="newRoleClient" class="form-input">
                        <option value="">Select client...</option>
                        <option value="Commonwealth Bank">Commonwealth Bank</option>
                        <option value="Westpac">Westpac</option>
                        <option value="Mercer">Mercer</option>
                        <option value="EML">EML</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeNewRoleModal()" class="cancel-btn">Cancel</button>
                <button onclick="createNewRole()" class="save-btn">Save</button>
                <button onclick="createNewRoleAndGoToBuilder()" class="save-btn builder-btn">Save & Go to Builder</button>
            </div>
        </div>
    </div>

    <!-- Keyword Selector Modal -->
    <div id="keywordSelectorModal" class="modal">
        <div class="modal-content keyword-selector-modal">
            <div class="modal-header">
                <h3>Keyword Selector from Directory</h3>
                <span class="close" onclick="closeKeywordSelectorModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="keyword-selector-container">
                    <div class="keyword-categories">
                        <!-- Categories will be populated here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeKeywordSelectorModal()" class="cancel-btn">Cancel</button>
                <button onclick="saveSelectedKeywords()" class="save-btn">Save Keywords</button>
            </div>
        </div>
    </div>

    <!-- Add Boolean Search Modal -->
    <div id="addBooleanSearchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Boolean Search</h3>
                <span class="close" onclick="closeAddBooleanSearchModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="booleanSearchTitle">Title:</label>
                    <input type="text" id="booleanSearchTitle" placeholder="Enter search title">
                </div>
                <div class="form-group">
                    <label for="booleanSearchInput">Boolean Search Terms:</label>
                    <input type="text" id="booleanSearchInput" placeholder="Enter search term and press Enter" onkeypress="handleBooleanSearchInputKeypress(event)">
                </div>
                <div class="boolean-terms-container">
                    <h4>Added Terms:</h4>
                    <div id="booleanTermsList" class="boolean-terms-list">
                        <!-- Boolean terms will be displayed here -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="saveBooleanSearch()" class="save-btn">Save Search</button>
                <button onclick="closeAddBooleanSearchModal()" class="cancel-btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Custom Confirmation Modal -->
    <div id="customConfirmModal" class="modal">
        <div class="modal-content confirm-modal">
            <div class="modal-header">
                <h3 id="confirmTitle">Confirm Action</h3>
                <span class="close" onclick="closeCustomConfirmModal()">&times;</span>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Are you sure you want to proceed?</p>
            </div>
            <div class="modal-footer">
                <button id="confirmYes" class="confirm-btn confirm-yes">Yes</button>
                <button id="confirmNo" class="confirm-btn confirm-no">No</button>
            </div>
        </div>
    </div>

    <!-- Custom Alert Modal -->
    <div id="customAlertModal" class="modal">
        <div class="modal-content alert-modal">
            <div class="modal-header">
                <h3 id="alertTitle">Notice</h3>
                <span class="close" onclick="closeCustomAlertModal()">&times;</span>
            </div>
            <div class="modal-body">
                <p id="alertMessage">This is an alert message.</p>
            </div>
            <div class="modal-footer">
                <button id="alertOk" class="alert-btn">OK</button>
            </div>
        </div>
    </div>

    <!-- Role Filter Modal -->
    <div id="roleFilterModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Filter Roles</h3>
                <span class="close" onclick="closeRoleFilterModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="filterClient">Client:</label>
                    <select id="filterClient" class="form-input">
                        <option value="">All clients</option>
                        <option value="Commonwealth Bank">Commonwealth Bank</option>
                        <option value="Westpac">Westpac</option>
                        <option value="Mercer">Mercer</option>
                        <option value="EML">EML</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="filterID">ID:</label>
                    <input type="text" id="filterID" placeholder="Enter role ID">
                </div>
                <div class="form-group">
                    <label for="filterTitle">Title:</label>
                    <input type="text" id="filterTitle" placeholder="Enter role title">
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="clearRoleFilters()" class="clear-filters-btn">Clear Filters</button>
                <button onclick="applyRoleFilters()" class="apply-filters-btn">Apply Filters</button>
            </div>
        </div>
    </div>

    <!-- Auth Modals -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Login</h3>
                <span class="close" onclick="closeAuthModal('loginModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="loginEmail">Email:</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password:</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password">
                </div>
                <div id="loginError" class="auth-error" style="display: none;"></div>
            </div>
            <div class="modal-footer">
                <button onclick="login()" class="save-btn">Login</button>
                <button onclick="closeAuthModal('loginModal')" class="cancel-btn">Cancel</button>
            </div>
        </div>
    </div>

    <div id="signupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Sign Up</h3>
                <span class="close" onclick="closeAuthModal('signupModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="signupEmail">Email:</label>
                    <input type="email" id="signupEmail" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="signupPassword">Password:</label>
                    <input type="password" id="signupPassword" placeholder="Enter your password (min 6 characters)">
                </div>
                <div id="signupError" class="auth-error" style="display: none;"></div>
            </div>
            <div class="modal-footer">
                <button onclick="signup()" class="save-btn">Sign Up</button>
                <button onclick="closeAuthModal('signupModal')" class="cancel-btn">Cancel</button>
            </div>
        </div>
    </div>
    </div>

</body>
</html> 